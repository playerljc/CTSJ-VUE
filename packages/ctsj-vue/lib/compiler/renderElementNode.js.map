{"version":3,"file":"renderElementNode.js","sources":["compiler/renderElementNode.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.renderElementNode = void 0;\r\nvar vue_util_1 = require(\"@ctsj/vue-util\");\r\nvar vdom_1 = require(\"../core/vdom\");\r\nvar model_1 = require(\"./directives/model\");\r\nvar html_1 = require(\"./directives/html\");\r\nvar text_1 = require(\"./directives/text\");\r\nvar util_1 = require(\"./directives/util\");\r\nvar renderUtil_1 = require(\"./renderUtil\");\r\n/**\r\n * renderElementNode - 渲染元素节点\r\n * @param context - Object 上下文对象\r\n * @param el - HtmlElement el元素\r\n * @param parentVNode - VNode 父元素VNode\r\n * @param parentElement - HtmlElement 父元素\r\n * @return {VNode | Array<VNode>}\r\n */\r\nfunction renderElementNode(_a) {\r\n    var context = _a.context, el = _a.el, parentVNode = _a.parentVNode, parentElement = _a.parentElement;\r\n    // 合并多个文本节点为一个文本节点\r\n    el.normalize();\r\n    // 解析指令属性\r\n    var _b = renderUtil_1.renderVAttr.call(this, {\r\n        el: el,\r\n        parentVNode: parentVNode,\r\n        parentElement: parentElement,\r\n        context: context,\r\n        renderFun: renderElementNode,\r\n    }), Continue = _b.Continue, VNode = _b.VNode;\r\n    if (!Continue)\r\n        return VNode;\r\n    // 如果没有VNode，创建一个\r\n    if (!VNode) {\r\n        VNode = vdom_1.createVNode(el.tagName.toLowerCase());\r\n    }\r\n    // 解析非指令属性\r\n    renderUtil_1.renderAttr.call(this, { el: el, VNode: VNode });\r\n    // 处理一下option这种情况\r\n    if (el.tagName.toLowerCase() === 'option' && parentVNode && parentElement) {\r\n        model_1.parseOption.call(this, { context: context, VNode: VNode, parentElement: parentElement });\r\n    }\r\n    var vAttrNames = util_1.getVAttrNames(el);\r\n    // 如果element元素包含v-html个v-text表明孩子是不需要迭代的\r\n    if (html_1.hasVHtml(vAttrNames) || text_1.hasVText(vAttrNames)) {\r\n        return VNode;\r\n    }\r\n    // loop children\r\n    for (var i = 0, len = el.childNodes.length; i < len; i++) {\r\n        var VNodes = renderUtil_1.renderLoop.call(this, {\r\n            context: context,\r\n            el: el.childNodes[i],\r\n            parentVNode: VNode,\r\n            parentElement: el,\r\n        });\r\n        if (!VNodes)\r\n            continue;\r\n        // v-for返回的\r\n        if (vue_util_1.isArray(VNodes)) {\r\n            VNodes.filter(function (n) { return n; }).forEach(function (n) {\r\n                VNode.children.push(n);\r\n            });\r\n        }\r\n        else if (vue_util_1.isObject(VNodes)) {\r\n            VNode.children.push(VNodes);\r\n        }\r\n    }\r\n    return VNode;\r\n}\r\nexports.renderElementNode = renderElementNode;\r\n"],"names":["Object","defineProperty","exports","value","renderElementNode","vue_util_1","require","vdom_1","model_1","html_1","text_1","util_1","renderUtil_1","_a","context","el","parentVNode","parentElement","normalize","_b","renderVAttr","call","this","renderFun","Continue","VNode","createVNode","tagName","toLowerCase","renderAttr","parseOption","vAttrNames","getVAttrNames","hasVHtml","hasVText","i","len","childNodes","length","VNodes","renderLoop","isArray","filter","n","forEach","children","push","isObject"],"mappings":"aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,uBAAoB,EAC5B,IAAIC,WAAaC,QAAQ,kBACrBC,OAASD,QAAQ,gBACjBE,QAAUF,QAAQ,sBAClBG,OAASH,QAAQ,qBACjBI,OAASJ,QAAQ,qBACjBK,OAASL,QAAQ,qBACjBM,aAAeN,QAAQ,gBAS3B,SAASF,kBAAkBS,GACvB,IAAIC,EAAUD,EAAGC,QAASC,EAAKF,EAAGE,GAAIC,EAAcH,EAAGG,YAAaC,EAAgBJ,EAAGI,cAEvFF,EAAGG,YAEH,IAAIC,EAAKP,aAAaQ,YAAYC,KAAKC,KAAM,CACzCP,GAAIA,EACJC,YAAaA,EACbC,cAAeA,EACfH,QAASA,EACTS,UAAWnB,oBACXoB,EAAWL,EAAGK,SAAUC,EAAQN,EAAGM,MACvC,IAAKD,EACD,OAAOC,EAGPA,EADCA,GACOlB,OAAOmB,YAAYX,EAAGY,QAAQC,eAG1ChB,aAAaiB,WAAWR,KAAKC,KAAM,CAAEP,GAAIA,EAAIU,MAAOA,IAEnB,WAA7BV,EAAGY,QAAQC,eAA8BZ,GAAeC,GACxDT,QAAQsB,YAAYT,KAAKC,KAAM,CAAER,QAASA,EAASW,MAAOA,EAAOR,cAAeA,IAEhFc,EAAapB,OAAOqB,cAAcjB,GAEtC,GAAIN,OAAOwB,SAASF,IAAerB,OAAOwB,SAASH,GAC/C,OAAON,EAGX,IAAK,IAAIU,EAAI,EAAGC,EAAMrB,EAAGsB,WAAWC,OAAQH,EAAIC,EAAKD,IAAK,CACtD,IAAII,EAAS3B,aAAa4B,WAAWnB,KAAKC,KAAM,CAC5CR,QAASA,EACTC,GAAIA,EAAGsB,WAAWF,GAClBnB,YAAaS,EACbR,cAAeF,IAEdwB,IAGDlC,WAAWoC,QAAQF,GACnBA,EAAOG,OAAO,SAAUC,GAAK,OAAOA,IAAMC,QAAQ,SAAUD,GACxDlB,EAAMoB,SAASC,KAAKH,KAGnBtC,WAAW0C,SAASR,IACzBd,EAAMoB,SAASC,KAAKP,IAG5B,OAAOd,EAEXvB,QAAQE,kBAAoBA"}