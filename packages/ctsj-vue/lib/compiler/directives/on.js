"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseVOn=exports.executeVOn=exports.executeExecutionContextVOn=exports.getVOnEntrys=exports.hasVOn=void 0;var model_1=require("./model"),util_1=require("../../shared/util"),proxy_1=require("../../core/proxy"),util_2=require("./util"),constants_1=require("../../shared/constants");function hasVOn(e){return util_2.hasVAttr(e,constants_1.DIRECT_PREFIX+"on")}function getVOnEntrys(e){var t=e.el;return e.vAttrNames.filter(function(e){return-1!==e.indexOf(constants_1.DIRECT_PREFIX+"on")}).map(function(e){return util_2.getDirectiveEntry(t,e)})}function executeExecutionContextVOn(e){var t=e.context,n=e.entry,o=e.e,e=e.argv,r=void 0===e?[]:e;n.expression in(this.$config.methods||{})?util_1.createExecutionContext.call(this,this,function(){this[n.expression].call(this.$dataProxy,o||(r&&r.length?r[0]:null))}):util_1.createExecutionContext.call(this,this,function(){util_1.execExpression.call(this,o?proxy_1.createContext(t,{$event:o}):r&&r.length?proxy_1.createContext(t,{$event:r[0]}):t,n.expression)})}function executeVOn(e){var t=e.context,n=e.entry,o=e.e,e=e.argv,e=void 0===e?[]:e;n.expression in this.$config.methods?this[n.expression].apply(this.$dataProxy,o||(e&&e.length?e[0]:null)):util_1.execExpression.call(this,o?proxy_1.createContext(t,{$event:o}):e&&e.length?proxy_1.createContext(t,{$event:e[0]}):t,n.expression)}function parseVOn(e){for(var o=e.context,t=e.el,r=e.tagName,n=e.vAttrNames,i=e.VNode,s=this,x=getVOnEntrys({el:t,vAttrNames:n}),a=0;a<x.length;a++)!function(e){var n=x[e];if(model_1.isFormTag(r)&&n.name===constants_1.DIRECT_PREFIX+"model")return;i.data.on[n.arg]=function(e){var t=(new Date).getTime();util_1.log("on开始执行"),n.modifiers&&(n.modifiers.stop&&e.stopPropagation(),n.modifiers.prevent&&e.preventDefault()),executeExecutionContextVOn.call(s,{context:o,entry:n,e:e});e=(new Date).getTime();util_1.log("on所执行的时间"+(e-t)/1e3+"m"),util_1.log("on执行结束")}}(a);return x}exports.hasVOn=hasVOn,exports.getVOnEntrys=getVOnEntrys,exports.executeExecutionContextVOn=executeExecutionContextVOn,exports.executeVOn=executeVOn,exports.parseVOn=parseVOn;
//# sourceMappingURL=on.js.map
