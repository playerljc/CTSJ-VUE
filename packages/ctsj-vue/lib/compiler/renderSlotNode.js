"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderSlotNode=void 0;var vue_util_1=require("@ctsj/vue-util"),src_1=require("@ctsj/vue-util/src"),util_1=require("./directives/util"),bind_1=require("./directives/bind"),constants_1=require("../shared/constants"),proxy_1=require("../core/proxy"),renderTemplateNode_1=require("./renderTemplateNode");function renderSlotNode(e){var t,n=this,i=e.context,r=e.el,o=e.parentVNode,s=(e.parentElement,"default"),l="parent";util_1.hasAttr("name",r)&&(s=util_1.getAttribute.call(this,{context:i,attrName:"name",el:r}));var a=util_1.getVAttrNames(r);bind_1.hasVBind(a)&&(t=bind_1.getVBindEntrys.call(this,{context:i,el:r,vAttrNames:a}));var u,d,e=Array.from(this.$el.getElementsByTagName("template")),a=e.findIndex(function(e){return e.getAttributeNames().some(function(e){return e.startsWith(constants_1.DIRECT_PREFIX+"slot:"+s)})}),c=null;return-1!==a&&(c=e[a]),c||((c=document.createElement("template")).setAttribute(constants_1.DIRECT_PREFIX+"slot:"+s,""),"default"===s?Array.from(this.$el.childNodes).filter(function(e){return!vue_util_1.isElementNode(e)||"template"!==e.tagName.toLowerCase()||!e.getAttributeNames().some(function(e){return e.startsWith(constants_1.DIRECT_PREFIX+"slot:")})}).forEach(function(e){var t,r=e.cloneNode(!0);src_1.isTextNode(r)||src_1.isCommentNode(r)||(t=util_1.getKey.call(n,{context:i,el:r}),vue_util_1.isEmpty(t)&&(t=vue_util_1.uuid(),e.setAttribute("key",t),r.setAttribute("key",t))),c.content.appendChild(r)}):(l="self",Array.from(r.childNodes).forEach(function(e){var t,r=e.cloneNode(!0);src_1.isTextNode(r)||src_1.isCommentNode(r)||(t=util_1.getKey.call(n,{context:i,el:r}),vue_util_1.isEmpty(t)&&(t=vue_util_1.uuid(),e.setAttribute("key",t),r.setAttribute("key",t))),c.content.appendChild(r)}))),"parent"===l?(u=proxy_1.createContext(this.$getParentContext()),d=c.getAttribute(constants_1.DIRECT_PREFIX+"slot:"+s),t&&t.length&&d&&(u[d]={},t.forEach(function(e){u[d][e.arg]=e.value}))):u=i,renderTemplateNode_1.renderTemplateNode.call(this.$parent,{context:u,el:c,parentVNode:o,parentElement:this.$el})}exports.renderSlotNode=renderSlotNode;
//# sourceMappingURL=renderSlotNode.js.map
