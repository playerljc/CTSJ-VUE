"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderSlotNode=void 0;var vue_util_1=require("@ctsj/vue-util"),for_1=require("./directives/for"),if_1=require("./directives/if"),else_1=require("./directives/else"),else_if_1=require("./directives/else-if"),util_1=require("./directives/util"),bind_1=require("./directives/bind"),constants_1=require("../shared/constants"),util_2=require("../shared/util"),proxy_1=require("../core/proxy"),renderTemplateNode_1=require("./renderTemplateNode");function renderSlotNode(e){var i=this,l=e.context,t=e.el,r=e.parentVNode,n=e.parentElement,e=util_1.getVAttrNames(t);if(e.length){if(for_1.hasVFor(e))return for_1.parseVFor.call(this,{context:l,el:t,parentVNode:r,vAttrNames:e,renderFun:renderSlotNode});if(if_1.hasVIf(e))if(!if_1.parseVIf.call(this,{context:l,el:t,vAttrNames:e}))return null;if(else_1.hasVElse(e)){if(!(a=else_1.parseVElse.call(this,{context:l,el:t,parentElement:n})).valid)return null;if(!a.result)return null}if(else_if_1.hasVElseIf(e)){if(!(a=else_if_1.parseVElseIf.call(this,{context:l,el:t,parentElement:n})).valid)return null;if(!a.result)return null}}var s,o="default",a="parent";util_1.hasAttr("name",t)&&(o=util_1.getAttribute.call(this,{context:l,attrName:"name",el:t})),bind_1.hasVBind(e)&&(s=bind_1.getVBindEntrys.call(this,{context:l,el:t,vAttrNames:e}));for(var u,_=Array.from(this.$el.getElementsByTagName("template")),d=-1,c=0,f=_.length;c<f;c++)if(_[c].getAttributeNames().some(function(e){if(e.startsWith(constants_1.DIRECT_PREFIX+"slot:")){if(/v-slot:\[\w{1,}\]/gim.test(e)){var t=e.indexOf("["),r=e.indexOf("]",t),r=e.substring(t+1,r),r=util_2.execExpression.call(i.$parent,i.$getParentContext(),r);return r===o&&(u=e),r===o}return e===constants_1.DIRECT_PREFIX+"slot:"+o&&(u=e),e===constants_1.DIRECT_PREFIX+"slot:"+o}return!1})){d=c;break}var m,p,v=null;return-1!==d&&(v=_[d]),v||((v=document.createElement("template")).setAttribute(constants_1.DIRECT_PREFIX+"slot:"+o,""),u=constants_1.DIRECT_PREFIX+"slot:"+o,"default"===o?Array.from(this.$el.childNodes).filter(function(e){return!vue_util_1.isElementNode(e)||"template"!==e.tagName.toLowerCase()||!e.getAttributeNames().some(function(e){return e.startsWith(constants_1.DIRECT_PREFIX+"slot:")})}).forEach(function(e){var t,r=e.cloneNode(!0);vue_util_1.isTextNode(r)||vue_util_1.isCommentNode(r)||(t=util_1.getKey.call(i,{context:l,el:r}),vue_util_1.isEmpty(t)&&(t=vue_util_1.uuid(),e.setAttribute("key",t),r.setAttribute("key",t))),v.content.appendChild(r)}):(a="self",Array.from(t.childNodes).forEach(function(e){var t,r=e.cloneNode(!0);vue_util_1.isTextNode(r)||vue_util_1.isCommentNode(r)||(t=util_1.getKey.call(i,{context:l,el:r}),vue_util_1.isEmpty(t)&&(t=vue_util_1.uuid(),e.setAttribute("key",t),r.setAttribute("key",t))),v.content.appendChild(r)}))),"parent"===a?(m=proxy_1.createContext(this.$getParentContext()),p=v.getAttribute(u),s&&s.length&&p&&(m[p]={},s.forEach(function(e){m[p][e.arg]=e.value}))):m=l,renderTemplateNode_1.renderTemplateNode.call(this.$parent,{context:m,el:v,parentVNode:r,parentElement:this.$el})}exports.renderSlotNode=renderSlotNode;
//# sourceMappingURL=renderSlotNode.js.map
