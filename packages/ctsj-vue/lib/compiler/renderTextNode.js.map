{"version":3,"file":"renderTextNode.js","sources":["compiler/renderTextNode.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.renderTextNode = void 0;\r\nvar constants_1 = require(\"../shared/constants\");\r\nvar util_1 = require(\"../shared/util\");\r\nvar vdom_1 = require(\"../core/vdom\");\r\n/**\r\n * renderTextNode - 渲染文本节点\r\n * @param context - 上下文对象\r\n * @param el - HtmlElement\r\n * @return {TextVNode}\r\n */\r\nfunction renderTextNode(_a) {\r\n    var context = _a.context, el = _a.el;\r\n    // 表达式\r\n    var expression = el.textContent.trim();\r\n    var index = 0;\r\n    var value = '';\r\n    while (index < expression.length) {\r\n        var startIndex = expression.indexOf(constants_1.START_TAG, index);\r\n        if (startIndex !== -1) {\r\n            var endIndex = expression.indexOf(constants_1.END_TAG, startIndex + constants_1.START_TAG.length);\r\n            if (endIndex !== -1) {\r\n                var dfs = expression.substring(startIndex + constants_1.START_TAG.length, endIndex);\r\n                value += expression.substring(index, startIndex) + util_1.execExpression.call(this, context, dfs);\r\n                index = endIndex + constants_1.END_TAG.length;\r\n            }\r\n            else {\r\n                value += expression.substring(index);\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            value += expression.charAt(index++);\r\n        }\r\n    }\r\n    return vdom_1.createTextVNode(value);\r\n}\r\nexports.renderTextNode = renderTextNode;\r\n"],"names":["Object","defineProperty","exports","value","renderTextNode","constants_1","require","util_1","vdom_1","_a","context","expression","el","textContent","trim","index","length","startIndex","indexOf","START_TAG","endIndex","END_TAG","substring","dfs","execExpression","call","this","charAt","createTextVNode"],"mappings":"aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,oBAAiB,EACzB,IAAIC,YAAcC,QAAQ,uBACtBC,OAASD,QAAQ,kBACjBE,OAASF,QAAQ,gBAOrB,SAASF,eAAeK,GAMpB,IALA,IAAIC,EAAUD,EAAGC,QAEbC,EAF2BF,EAAGG,GAEdC,YAAYC,OAC5BC,EAAQ,EACRZ,EAAQ,GACLY,EAAQJ,EAAWK,QAAQ,CAC9B,IAAIC,EAAaN,EAAWO,QAAQb,YAAYc,UAAWJ,GAC3D,IAAoB,IAAhBE,EAAmB,CACnB,IAAIG,EAAWT,EAAWO,QAAQb,YAAYgB,QAASJ,EAAaZ,YAAYc,UAAUH,QAC1F,IAAkB,IAAdI,EAKC,CACDjB,GAASQ,EAAWW,UAAUP,GAC9B,MANA,IAAIQ,EAAMZ,EAAWW,UAAUL,EAAaZ,YAAYc,UAAUH,OAAQI,GAC1EjB,GAASQ,EAAWW,UAAUP,EAAOE,GAAcV,OAAOiB,eAAeC,KAAKC,KAAMhB,EAASa,GAC7FR,EAAQK,EAAWf,YAAYgB,QAAQL,YAQ3Cb,GAASQ,EAAWgB,OAAOZ,KAGnC,OAAOP,OAAOoB,gBAAgBzB,GAElCD,QAAQE,eAAiBA"}