{"version":3,"file":"util.js","sources":["core/component/util.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isComponentInstance = exports.getComponentConfig = exports.createComponent = exports.isComponentNodeByComponent = exports.isComponentNodeByVue = void 0;\r\nvar vue_util_1 = require(\"@ctsj/vue-util\");\r\nvar register_1 = require(\"./register\");\r\nvar util_1 = require(\"../util\");\r\nvar index_1 = __importDefault(require(\"./index\"));\r\n/**\r\n * isComponentNodeByVue - 在Vue实例下el是否为一个组件标签\r\n * @param el - {HtmlElement}\r\n * @return boolean\r\n */\r\nfunction isComponentNodeByVue(el) {\r\n    // 是否是Element元素\r\n    var isElement = vue_util_1.isElementNode(el);\r\n    if (!isElement)\r\n        return false;\r\n    var tagName = el.tagName;\r\n    return register_1.existsComponentByGlobal(tagName.toLowerCase());\r\n}\r\nexports.isComponentNodeByVue = isComponentNodeByVue;\r\n/**\r\n * isComponentNodeByComponent - 在component实例下el是否是组件标签\r\n * @param el - {HtmlElement}\r\n * @param components - 组件配置中的components声明\r\n * @return boolean\r\n */\r\nfunction isComponentNodeByComponent(el, components) {\r\n    // 是否是Element元素\r\n    var isElement = vue_util_1.isElementNode(el);\r\n    if (!isElement)\r\n        return false;\r\n    var tagName = el.tagName;\r\n    var exists = register_1.existsComponentByComponent(tagName.toLowerCase(), components);\r\n    // 如果在组件的components中没有找到则去全局中寻找\r\n    if (!exists) {\r\n        exists = register_1.existsComponentByGlobal(tagName.toLowerCase());\r\n    }\r\n    return exists;\r\n}\r\nexports.isComponentNodeByComponent = isComponentNodeByComponent;\r\n/**\r\n * createComponent - 创建一个组件(Component)\r\n * @param attrs - Object props和attrs的所有k/v数据\r\n * @param events - Object 所有events的k/v数据\r\n * @param parentContext - Object 父亲的上下文对象\r\n * @param parent - Vue | Component 父亲是Vue实例或者Component实例\r\n * @param root - Vue Vue实例\r\n * @param el - HtmlElement 元素\r\n * @param key - string 组件的key\r\n * @param route - Object 匹配的路由配置\r\n * @param $route - Object 当前理由信息\r\n * @return Component\r\n */\r\nfunction createComponent(_a) {\r\n    var attrs = _a.attrs, events = _a.events, parentContext = _a.parentContext, parent = _a.parent, root = _a.root, el = _a.el, key = _a.key, route = _a.route, $route = _a.$route;\r\n    return new index_1.default({ attrs: attrs, events: events, parentContext: parentContext }, { key: key, el: el, root: root, parent: parent, route: route, $route: $route });\r\n}\r\nexports.createComponent = createComponent;\r\n/**\r\n * getComponentConfig - 获取组件的配置对象\r\n * @param ins - Vue | Component vue或component实例\r\n * @param componentName - 组件的名字\r\n * @return Object 组件的配置对象\r\n */\r\n// xxx-xxx-xxx 获取\r\n// AbcDef 尝试AbcDef和abc-def获取\r\nfunction getComponentConfig(ins, componentName) {\r\n    // 如果是Vue实例\r\n    if (util_1.isVueInstance(ins)) {\r\n        // 需要判断是否有mixin\r\n        return register_1.getConfig(componentName);\r\n    }\r\n    // 如果是组件实例\r\n    if (isComponentInstance(ins)) {\r\n        var components = ins.$getComponentsConfig();\r\n        // 如果组件的components中定义了\r\n        if (components[componentName]) {\r\n            return components[componentName];\r\n        }\r\n        // 如果组件的components没有定义则去全局寻找\r\n        // 需要判断是否有mixin\r\n        return register_1.getConfig(componentName);\r\n    }\r\n    return null;\r\n}\r\nexports.getComponentConfig = getComponentConfig;\r\n/**\r\n * isComponentInstance - ins是否是一个组件实例\r\n * @param ins - 一个实例对象\r\n * @return boolean\r\n */\r\nfunction isComponentInstance(ins) {\r\n    return vue_util_1.isObject(ins) && ins instanceof index_1.default;\r\n}\r\nexports.isComponentInstance = isComponentInstance;\r\n"],"names":["__importDefault","this","mod","__esModule","default","Object","defineProperty","exports","value","isComponentInstance","getComponentConfig","createComponent","isComponentNodeByComponent","isComponentNodeByVue","vue_util_1","require","register_1","util_1","index_1","el","isElementNode","tagName","existsComponentByGlobal","toLowerCase","components","existsComponentByComponent","_a","attrs","events","parentContext","parent","root","key","route","$route","ins","componentName","isVueInstance","getConfig","$getComponentsConfig","isObject"],"mappings":"aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,IAExDG,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,oBAAsBF,QAAQG,mBAAqBH,QAAQI,gBAAkBJ,QAAQK,2BAA6BL,QAAQM,0BAAuB,EACzJ,IAAIC,WAAaC,QAAQ,kBACrBC,WAAaD,QAAQ,cACrBE,OAASF,QAAQ,WACjBG,QAAUlB,gBAAgBe,QAAQ,YAMtC,SAASF,qBAAqBM,GAG1B,IADgBL,WAAWM,cAAcD,GAErC,OAAO,EACPE,EAAUF,EAAGE,QACjB,OAAOL,WAAWM,wBAAwBD,EAAQE,eAStD,SAASX,2BAA2BO,EAAIK,GAGpC,IADgBV,WAAWM,cAAcD,GAErC,OAAO,EACPE,EAAUF,EAAGE,QAMjB,OALaL,WAAWS,2BAA2BJ,EAAQE,cAAeC,IAG7DR,WAAWM,wBAAwBD,EAAQE,eAkB5D,SAASZ,gBAAgBe,GACrB,IAAIC,EAAQD,EAAGC,MAAOC,EAASF,EAAGE,OAAQC,EAAgBH,EAAGG,cAAeC,EAASJ,EAAGI,OAAQC,EAAOL,EAAGK,KAAMZ,EAAKO,EAAGP,GAAIa,EAAMN,EAAGM,IAAKC,EAAQP,EAAGO,MAAOC,EAASR,EAAGQ,OACxK,OAAO,IAAIhB,QAAQd,QAAQ,CAAEuB,MAAOA,EAAOC,OAAQA,EAAQC,cAAeA,GAAiB,CAAEG,IAAKA,EAAKb,GAAIA,EAAIY,KAAMA,EAAMD,OAAQA,EAAQG,MAAOA,EAAOC,OAAQA,IAWrK,SAASxB,mBAAmByB,EAAKC,GAE7B,GAAInB,OAAOoB,cAAcF,GAErB,OAAOnB,WAAWsB,UAAUF,GAGhC,GAAI3B,oBAAoB0B,GAAM,CACtBX,EAAaW,EAAII,uBAErB,OAAIf,EAAWY,GACJZ,EAAWY,GAIfpB,WAAWsB,UAAUF,GAEhC,OAAO,KAQX,SAAS3B,oBAAoB0B,GACzB,OAAOrB,WAAW0B,SAASL,IAAQA,aAAejB,QAAQd,QAzE9DG,QAAQM,qBAAuBA,qBAoB/BN,QAAQK,2BAA6BA,2BAkBrCL,QAAQI,gBAAkBA,gBA4B1BJ,QAAQG,mBAAqBA,mBAS7BH,QAAQE,oBAAsBA"}