{"version":3,"file":"util.js","sources":["core/util.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isComputedProperty = exports.isVueInstance = exports.getEl = exports.triggerLifecycle = exports.resetComputed = void 0;\r\nvar util_1 = require(\"./component/util\");\r\nvar util_2 = require(\"../shared/util\");\r\nvar index_1 = __importDefault(require(\"./index\"));\r\n/**\r\n * resetComputed - 重置计算属性\r\n */\r\nfunction resetComputed() {\r\n    for (var p in this.$config.computed) {\r\n        this[p] = null;\r\n    }\r\n}\r\nexports.resetComputed = resetComputed;\r\n/**\r\n * triggerLifecycle - 调用生命周期函数\r\n * @param hookName\r\n */\r\nfunction triggerLifecycle(hookName) {\r\n    if (this.$config[hookName] && util_2.isFunction(this.$config[hookName])) {\r\n        // 生命周期调用后，生命周期函数中的this是代理对象，因为在生命周期函数中可能(肯定)会修改data中的值\r\n        // TODO: 调用生命周期HOOKS\r\n        util_2.createExecutionContext.call(this, this, function () {\r\n            this.$config[hookName].call(this.$dataProxy);\r\n        });\r\n    }\r\n}\r\nexports.triggerLifecycle = triggerLifecycle;\r\n/**\r\n * getEl - 根据Vue实例配置中的el获取实际的el对象\r\n * 因为VNode渲染的原因它会替换掉原始的el节点，所以要自己创建一个渲染子节点用来被替换\r\n * @param elConfig - HtmlElement | String\r\n * @return HTMLElement\r\n */\r\nfunction getEl(elConfig) {\r\n    var el;\r\n    if (elConfig instanceof HTMLElement) {\r\n        el = elConfig;\r\n    }\r\n    else if (typeof elConfig === 'string') {\r\n        el = document.querySelector(elConfig);\r\n    }\r\n    if (el) {\r\n        var innerEl = document.createElement('div');\r\n        el.appendChild(innerEl);\r\n        return innerEl;\r\n    }\r\n    return null;\r\n}\r\nexports.getEl = getEl;\r\n/**\r\n * isVueInstance - ins是否是一个Vue实例\r\n * @param ins - 一个实例对象\r\n * @return boolean\r\n */\r\nfunction isVueInstance(ins) {\r\n    return util_2.isObject(ins) && ins instanceof index_1.default;\r\n}\r\nexports.isVueInstance = isVueInstance;\r\n/**\r\n * isComputedProperty - 是否是计算属性的key\r\n * @param ins - 实例\r\n * @param key - key\r\n * @return boolean\r\n */\r\nfunction isComputedProperty(ins, key) {\r\n    if (isVueInstance(ins)) {\r\n        return key in (ins.$config.computed || {});\r\n    }\r\n    if (util_1.isComponentInstance(ins)) {\r\n        return key in (ins.$config.computed || {});\r\n    }\r\n    return false;\r\n}\r\nexports.isComputedProperty = isComputedProperty;\r\n"],"names":["__importDefault","this","mod","__esModule","default","Object","defineProperty","exports","value","isComputedProperty","isVueInstance","getEl","triggerLifecycle","resetComputed","util_1","require","util_2","index_1","p","$config","computed","hookName","isFunction","createExecutionContext","call","$dataProxy","elConfig","el","HTMLElement","document","querySelector","innerEl","createElement","appendChild","ins","isObject","key","isComponentInstance"],"mappings":"aACA,IAAIA,gBAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAEE,QAAWF,IAExDG,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,mBAAqBF,QAAQG,cAAgBH,QAAQI,MAAQJ,QAAQK,iBAAmBL,QAAQM,mBAAgB,EACxH,IAAIC,OAASC,QAAQ,oBACjBC,OAASD,QAAQ,kBACjBE,QAAUjB,gBAAgBe,QAAQ,YAItC,SAASF,gBACL,IAAK,IAAIK,KAAKjB,KAAKkB,QAAQC,SACvBnB,KAAKiB,GAAK,KAQlB,SAASN,iBAAiBS,GAClBpB,KAAKkB,QAAQE,IAAaL,OAAOM,WAAWrB,KAAKkB,QAAQE,KAGzDL,OAAOO,uBAAuBC,KAAKvB,KAAMA,KAAM,WAC3CA,KAAKkB,QAAQE,GAAUG,KAAKvB,KAAKwB,cAW7C,SAASd,MAAMe,GACX,IAAIC,EAOJ,GANID,aAAoBE,YACpBD,EAAKD,EAEoB,iBAAbA,IACZC,EAAKE,SAASC,cAAcJ,IAE5BC,EAAI,CACAI,EAAUF,SAASG,cAAc,OAErC,OADAL,EAAGM,YAAYF,GACRA,EAEX,OAAO,KAQX,SAASrB,cAAcwB,GACnB,OAAOlB,OAAOmB,SAASD,IAAQA,aAAejB,QAAQb,QAS1D,SAASK,mBAAmByB,EAAKE,GAC7B,OAAI1B,cAAcwB,MAGdpB,OAAOuB,oBAAoBH,KAFpBE,KAAQF,EAAIf,QAAQC,UAAY,IAtD/Cb,QAAQM,cAAgBA,cAcxBN,QAAQK,iBAAmBA,iBAsB3BL,QAAQI,MAAQA,MAShBJ,QAAQG,cAAgBA,cAgBxBH,QAAQE,mBAAqBA"}