"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var i,t=1,r=arguments.length;t<r;t++)for(var n in i=arguments[t])Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobalConfig=void 0;var vue_util_1=require("@ctsj/vue-util"),util_1=require("./component/util"),vdom_1=require("./vdom"),register_1=require("./component/register"),render_1=require("../compiler/render"),constants_1=require("../shared/constants"),merge_1=require("./merge"),util_2=require("./util"),proxy_1=require("./proxy"),util_3=require("../shared/util");function findVNodeParentByKey(e,i){if(!e||e.key===i)return null;var t=null;if(!("children"in e&&e.children))return null;for(var r=0;r<e.children.length;r++){var n=e.children[r];if(n){if(n.key===i){t=e;break}if("children"in n&&n.children&&(t=findVNodeParentByKey.call(this,n,i)))break}}return t}var _globalConfig={},_plugins=[];function getGlobalConfig(){return __assign({},_globalConfig)}exports.getGlobalConfig=getGlobalConfig;var Vue=function(){function i(e){this.$config=util_2.mixinConfig({globalConfig:getGlobalConfig(),mixins:e.mixins||[],config:e}),this.$config.el=util_2.getEl(this.$config.el),this.$refs={},this.$router=this.$config.router,this.$noProxySrcData=vue_util_1.cloneDeep(vue_util_1.isFunction(this.$config.data)?this.$config.data():{}),merge_1.mergeData.call(this),merge_1.mergeComputed.call(this),util_2.triggerLifecycle.call(this,constants_1.LIFECYCLE_HOOKS[0]),this.$dataProxy=proxy_1.createVueProxy.call(this,this),merge_1.mergeMethods.call(this),this.templateEl=vue_util_1.createElement(this.$config.template),this.componentsMap=new Map,render_1.render.call(this,this.$config.el,!0)}return i.component=function(e,i){util_1.isKebabCase(e)?register_1.register(e.toLowerCase(),i):util_1.isPascalCase(e)&&(register_1.register(e.toLowerCase(),i),register_1.register(util_1.pascalCaseToKebabCase(e),i))},i.mixin=function(e){_globalConfig=e},i.use=function(e){return!!e&&(-1===_plugins.indexOf(e)&&(vue_util_1.isObject(e)?!!("install"in e&&vue_util_1.isFunction(e.install))&&(e.install(i),_plugins.push(e),!0):!!vue_util_1.isFunction(e)&&(e(i),_plugins.push(e),!0)))},i.prototype.$createAsyncExecContext=function(e){var i=this;return function(){util_3.createExecutionContext.call(i,i,e)}},i.prototype.$refresh=function(i){var e,t=vue_util_1.cloneDeep(this.$preVNode),r=findVNodeParentByKey.call(this,t,i.key);!r||-1!==(e=r.children.findIndex(function(e){return e.key===i.key}))&&(r.children[e]=i,this.$preVNode=vdom_1.patch(this.$preVNode,t))},i}();exports.default=Vue;
//# sourceMappingURL=index.js.map
