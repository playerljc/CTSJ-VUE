"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var path_to_regexp_1=require("path-to-regexp"),vue_util_1=require("@ctsj/vue-util"),qs_1=require("./qs");function getConfig(e){var t,r={};for(t in e)Object.defineProperty(r,t,{writable:!1,value:e[t]});return r}function linkRoutes(e){for(var t=0;t<e.length;t++)linkRouteLoop(e[t])}function linkRouteLoop(e){for(var t=0,r=(e.children||[]).length;t<r;t++){var o=e.children[t];o.parent=e,linkRouteLoop(o)}}function createRoute(e){var t=e.route,e=e.paramMap;return{path:getCurRoutePath(t),params:e,query:qs_1.parse(),hash:window.location.hash,fullPath:window.location.href,matched:vue_util_1.cloneDeep(t),name:"",redirectedFrom:""}}function getCurRoutePath(e){for(var t=[],r=e;r;)t.push(r.path),-1===r.path.lastIndexOf("/")&&t.push("/"),r=r.parent;return t.length&&(-1===t[0].indexOf("/")&&t.unshift("/"),-1===t[t.length-1].indexOf("/")&&t.push("/")),t.reverse().join("")}var VueRouter=function(){function e(e){this.$config=getConfig(e),linkRoutes(this.$config.routes||[])}return e.prototype.$getComponentIsVueIns=function(){for(var u,i=window.location.pathname,p=this.$config.routers,e=0,t=(p||[]).length;e<t;e++)if("break"===function(e){var t=p[e],r=t.path,o=t.component,t=[],r=path_to_regexp_1.pathToRegexp(r,t);if(r.test(i)){var n={},a=r.exec(i);return t.forEach(function(e,t){e=e.name;n[e]=a[t]}),u={component:o,detail:createRoute({route:p[e],paramMap:n}),route:p[e]},"break"}}(e))break;return u},e.prototype.$getComponentIsComIns=function(e){for(var i,p=window.location.pathname,t=e.children,h=void 0===t?[]:t,c=getCurRoutePath(e),r=0,o=(h||[]).length;r<o;r++)if("break"===function(e){var t=h[e],r=t.path,o=t.component,n=[],t=""+c+r;c.endsWith("/")?r.startsWith("/")&&(t=""+c+r.substring(1)):r.startsWith("/")||(t=c+"/"+r);t=path_to_regexp_1.pathToRegexp(t,n);if(t.test(p)){var a={},u=t.exec(p);return n.forEach(function(e,t){e=e.name;a[e]=u[t]}),i={component:o,detail:createRoute({route:h[e],paramMap:a}),route:h[e]},"break"}}(r))break;return i},e}();exports.default=VueRouter;
//# sourceMappingURL=index.js.map
