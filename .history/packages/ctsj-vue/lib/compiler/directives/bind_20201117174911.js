"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseVBind=exports.getVBindEntrys=exports.hasVBind=void 0;var proxy_1=require("../../core/proxy"),util_1=require("../../core/component/util"),util_2=require("./util"),constants_1=require("../../shared/constants"),util_3=require("../../shared/util");function hasVBind(e){return util_2.hasVAttr(e,constants_1.DIRECT_PREFIX+"bind")}function getVBindEntrys(e){var r=e.context,n=e.el,e=e.vAttrNames.filter(function(e){return-1!==e.indexOf(constants_1.DIRECT_PREFIX+"bind")}),a=document.createElement(n.tagName),i=[];return e.forEach(function(e){var s,t;e===constants_1.DIRECT_PREFIX+"bind"?(s=n.getAttribute(e),t=util_3.execExpression(r,s),util_3.isObject(t)&&Object.keys(t).forEach(function(e){var t;proxy_1.isProxyProperty(e)&&(t=constants_1.DIRECT_PREFIX+"bind:"+util_1.pascalCaseToKebabCase(e),a.setAttribute(t,s+"."+e),i.push(t))})):(a.setAttribute(e,n.getAttribute(e)),i.push(e))}),i.map(function(e){var t=util_2.getDirectiveEntry(a,e);return"class"===t.arg||"style"===t.arg?("class"===t.arg&&(t.expression.startsWith("{")&&t.expression.endsWith("}")&&(t.expression="Object("+t.expression+")"),t.value=util_3.execExpression(r,t.expression),util_3.isArray(t.value)&&(e=t.value,t.value={},e.forEach(function(e){t.value[e]=!0}))),"style"===t.arg&&(0===t.expression.indexOf("{")&&t.expression.lastIndexOf("}")===t.expression.length-1&&(t.expression="Object("+t.expression+")"),t.value=util_3.execExpression(r,t.expression))):t.arg&&(t.value=util_3.execExpression(r,t.expression)),t})}function parseVBind(e){var t=e.context,s=e.el,r=e.vAttrNames,n=e.VNode,r=getVBindEntrys.call(this,{context:t,el:s,vAttrNames:r});return r.forEach(function(e){"key"===e.arg?n.key=e.value:"class"===e.arg?Object.assign(n.data.class,e.value):"style"===e.arg?Object.assign(n.data.style,e.value):e.arg.startsWith("data-")?n.data.dataset[util_3.toCamelCase(e.arg.substring("data-".length))]=e.value:n.data.props[e.arg]=e.value}),r}exports.hasVBind=hasVBind,exports.getVBindEntrys=getVBindEntrys,exports.parseVBind=parseVBind;
//# sourceMappingURL=bind.js.map
